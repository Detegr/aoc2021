# Preprocessing
Split â† (Â¬-ËœâŠ¢Ã—Â·+`Â»âŠ¸>)âˆ˜â‰ âŠ”âŠ¢
input â† â€¢FLines "input13"
âŸ¨points, foldsâŸ©â†(+`0âŠ¸=â‰ Â¨input)âŠ”input
pointsâ†©âŒ½Â¨{â€¢BQN"âŸ¨"âˆ¾ğ•©âˆ¾"âŸ©"}Â¨points
foldsâ†©{(Â¯1âŠ‘âŠ‘ğ•©)âˆ¾1âŠ‘ğ•©}Â¨'='SplitÂ¨1â†“folds

gridâ†0â¥ŠËœ1+âŒˆÂ´points
gridâ†©1Â¨âŒ¾(pointsâŠ¸âŠ‘) grid

Foldâ†{ğ•Š:
  axisâ†âŠ‘ğ•¨
  vâ†â€¢BQN 1â†“ğ•¨

  # Rotate matrix 90 degrees if axis is y
  Fâ†(axis="y")â—¶â‰â€¿âŠ¢

  # Calculate the two halves
  # I guess this breaks if the latter part
  # of the fold is smaller than the first,
  # but doesn't look like that in my input...
  fstâ†vâ†‘Fğ•©
  sndâ†(v+1)â†“Fğ•©
  smaxâ†fstâŒˆâ—‹â‰¢snd

  >âŸœ0Â¨F fst+âŒ½(smaxâ†‘snd)
}

# star 1
â€¢Show +Â´+Ë(âŠ‘folds) Fold grid

# star 2
{gridâ†©ğ•© Fold grid}Â¨folds
â€¢Show âŠâŸœ" â–ˆ"Ë˜grid
